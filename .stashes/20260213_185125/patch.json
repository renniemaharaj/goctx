{
  "estimated_tokens": 6200,
  "project_tree": ".\ninternal\n  ‚îî‚îÄ‚îÄ browser\n    ‚îî‚îÄ‚îÄ automation.go\n  ‚îî‚îÄ‚îÄ ui\n    ‚îî‚îÄ‚îÄ ui.go\nassets\n  ‚îî‚îÄ‚îÄ style.css\n",
  "files": {
    "assets/style.css": "window {\n  background-color: #1e1e1e;\n  color: #d4d4d4;\n  font-family: \"Segoe UI\", \"Ubuntu\", \"Monospace\";\n}\n\n.sidebar {\n  background-color: #252526;\n  border-right: 1px solid #333;\n}\n\n.input-area {\n  background-color: #3c3c3c;\n  color: #fff;\n  border: 1px solid #007acc;\n  padding: 5px;\n}\n\nbutton {\n  background: #0e639c;\n  color: #ffffff;\n  border: none;\n  padding: 8px 12px;\n  font-weight: normal;\n}\n\nbutton:hover {\n  background: #1177bb;\n}\n\nlabel.header {\n  font-weight: bold;\n  font-size: 11px;\n  color: #858585;\n  text-transform: uppercase;\n}\n\ntextview {\n  background-color: #1e1e1e;\n  color: #9cdcfe;\n  font-family: \"Consolas\", \"Monaco\", \"monospace\";\n}",
    "internal/browser/automation.go": "package browser\n\n// Placeholder for Rod-based AI automation\n// This will eventually drive a browser to interact with AI web interfaces\ntype AIWorker struct {\n\tHeadless bool\n}\n\nfunc (w *AIWorker) ProcessProjectState(prompt string) (string, error) {\n\t// TODO: Implement Rod navigation to chat interface\n\treturn \"\", nil\n}",
    "internal/ui/ui.go": "package ui\n\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"goctx/internal/apply\"\n\t\"goctx/internal/builder\"\n\t\"goctx/internal/model\"\n\t\"os\"\n\t\"path/filepath\"\n\n\t\"github.com/gotk3/gotk3/gdk\"\n\t\"github.com/gotk3/gotk3/gtk\"\n)\n\nfunc Run() {\n\tgtk.Init(nil)\n\tapplyCSS()\n\n\twin, _ := gtk.WindowNew(gtk.WINDOW_TOPLEVEL)\n\twin.SetTitle(\"‚óè GoCtx Editor\")\n\twin.SetDefaultSize(1200, 800)\n\twin.Connect(\"destroy\", gtk.MainQuit)\n\n\thbox, _ := gtk.BoxNew(gtk.ORIENTATION_HORIZONTAL, 0)\n\n\t// --- VS CODE SIDEBAR ---\n\tsidebar, _ := gtk.BoxNew(gtk.ORIENTATION_VERTICAL, 0)\n\tsidebar.SetSizeRequest(260, -1)\n\tsctx, _ := sidebar.GetStyleContext()\n\tsctx.AddClass(\"sidebar\")\n\n\tlabel(sidebar, \"Explorer: Stashes\")\n\tlist, _ := gtk.ListBoxNew()\n\trefreshStashes(list)\n\tsidebar.PackStart(list, true, true, 0)\n\n\t// --- MAIN EDITOR AREA ---\n\teditorBox, _ := gtk.BoxNew(gtk.ORIENTATION_VERTICAL, 0)\n\n\t// Top Toolbar\n\tbar, _ := gtk.BoxNew(gtk.ORIENTATION_HORIZONTAL, 10)\n\tbar.SetMarginTop(10)\n\tbar.SetMarginBottom(10)\n\tbar.SetMarginStart(10)\n\n\tbtnGen, _ := gtk.ButtonNewWithLabel(\"Build Context\")\n\tbtnApply, _ := gtk.ButtonNewWithLabel(\"Apply Change\")\n\tbar.PackStart(btnGen, false, false, 0)\n\tbar.PackStart(btnApply, false, false, 0)\n\n\teditorBox.PackStart(bar, false, false, 0)\n\n\t// Output/Editor View\n\tsw, _ := gtk.ScrolledWindowNew(nil, nil)\n\ttv, _ := gtk.TextViewNew()\n\ttv.SetLeftMargin(10)\n\tbuf, _ := tv.GetBuffer()\n\tsw.Add(tv)\n\teditorBox.PackStart(sw, true, true, 0)\n\n\t// --- BOTTOM PROMPT INPUT ---\n\tinputBox, _ := gtk.BoxNew(gtk.ORIENTATION_VERTICAL, 5)\n\tinputBox.SetMarginBottom(10)\n\tinputBox.SetMarginStart(10)\n\tinputBox.SetMarginEnd(10)\n\t\n\tlabel(inputBox, \"AI Instruction Prompt\")\n\tentry, _ := gtk.EntryNew()\n\tentry.SetPlaceholderText(\"e.g., Rewrite the UI to use a grid layout...\")\n\tsctxE, _ := entry.GetStyleContext()\n\tsctxE.AddClass(\"input-area\")\n\tinputBox.PackStart(entry, false, false, 0)\n\t\n\teditorBox.PackEnd(inputBox, false, false, 0)\n\n\t// LOGIC\n\tbtnGen.Connect(\"clicked\", func() {\n\t\tinstructions, _ := entry.GetText()\n\t\tout, _ := builder.BuildContext(\".\")\n\t\tjsonData, _ := json.MarshalIndent(out, \"\", \"  \")\n\t\tprompt := fmt.Sprintf(\"Task: %s\\n\\nRefer to the following JSON as the \\\"project state\\\". Respond only with the updated JSON project state.\\n\\n%s\", instructions, string(jsonData))\n\t\tbuf.SetText(prompt)\n\t})\n\n\tbtnApply.Connect(\"clicked\", func() {\n\t\tcb, _ := gtk.ClipboardGet(gdk.SELECTION_CLIPBOARD)\n\t\ttext, err := cb.WaitForText()\n\t\tif err == nil \u0026\u0026 text != \"\" {\n\t\t\tvar input model.ProjectOutput\n\t\t\tif json.Unmarshal([]byte(text), \u0026input) == nil {\n\t\t\t\tapply.ApplyPatch(\".\", input)\n\t\t\t\trefreshStashes(list)\n\t\t\t\tbuf.SetText(\"// State Applied Successfully\")\n\t\t\t}\n\t\t}\n\t})\n\n\thbox.PackStart(sidebar, false, false, 0)\n\thbox.PackStart(editorBox, true, true, 0)\n\twin.Add(hbox)\n\twin.ShowAll()\n\tgtk.Main()\n}\n\nfunc label(box *gtk.Box, text string) {\n\tl, _ := gtk.LabelNew(text)\n\tl.SetXAlign(0)\n\tl.SetMarginStart(10)\n\tl.SetMarginTop(5)\n\tsctx, _ := l.GetStyleContext()\n\tsctx.AddClass(\"header\")\n\tbox.PackStart(l, false, false, 2)\n}\n\nfunc refreshStashes(list *gtk.ListBox) {\n\tlist.GetChildren().Foreach(func(item interface{}) { list.Remove(item.(gtk.IWidget)) })\n\tfilepath.Walk(\".stashes\", func(path string, info os.FileInfo, err error) error {\n\t\tif err == nil \u0026\u0026 info.IsDir() \u0026\u0026 path != \".stashes\" \u0026\u0026 filepath.Dir(path) == \".stashes\" {\n\t\t\trow, _ := gtk.ListBoxRowNew()\n\t\t\tlbl, _ := gtk.LabelNew(\" üìÅ \" + filepath.Base(path))\n\t\t\tlbl.SetXAlign(0)\n\t\t\trow.Add(lbl)\n\t\t\tlist.Add(row)\n\t\t}\n\t\treturn nil\n\t})\n\tlist.ShowAll()\n}\n\nfunc applyCSS() {\n\tprovider, _ := gtk.CssProviderNew()\n\tprovider.LoadFromPath(\"assets/style.css\")\n\tscreen, _ := gdk.ScreenGetDefault()\n\tgtk.AddProviderForScreen(screen, provider, gtk.STYLE_PROVIDER_PRIORITY_APPLICATION)\n}\n"
  }
}