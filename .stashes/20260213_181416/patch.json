{
  "estimated_tokens": 2500,
  "project_tree": ".\nassets\n  └── style.css\ngo.mod\ngo.sum\ninternal\n  └── apply\n    └── apply.go\n  └── builder\n    └── context.go\n  └── config\n    └── config.go\n  └── model\n    └── types.go\n  └── overlay\n    └── overlay.go\n    └── x11.go\n  └── stash\n    └── stash.go\n  └── ui\n    └── ui.go\nmain.go\nui\n  └── window.go\n",
  "files": {
    "internal/overlay/x11.go": "package overlay\n\nimport (\n\t\"github.com/gotk3/gotk3/cairo\"\n\t\"github.com/gotk3/gotk3/gtk\"\n)\n\ntype X11Overlay struct {\n\twindow *gtk.Window\n}\n\nfunc NewX11Overlay() *X11Overlay {\n\twin, _ := gtk.WindowNew(gtk.WINDOW_TOPLEVEL)\n\twin.SetDecorated(false)\n\twin.SetKeepAbove(true)\n\twin.SetAppPaintable(true)\n\twin.SetAcceptFocus(false)\n\twin.SetSkipTaskbarHint(true)\n\twin.SetSkipPagerHint(true)\n\n\tscreen, _ := win.GetScreen()\n\tvisual, _ := screen.GetRGBAVisual()\n\tif visual != nil {\n\t\twin.SetVisual(visual)\n\t}\n\n\twin.Connect(\"draw\", func(w *gtk.Window, cr *cairo.Context) bool {\n\t\tcr.SetSourceRGBA(0, 0, 0, 0.5)\n\t\tcr.Paint()\n\t\treturn false\n\t})\n\n\twin.Fullscreen()\n\treturn \u0026X11Overlay{window: win}\n}\n\nfunc (o *X11Overlay) Start() error { o.window.ShowAll(); return nil }\nfunc (o *X11Overlay) SetOpacity(val float64) { o.window.SetOpacity(val) }\nfunc (o *X11Overlay) Show() { o.window.Show() }\nfunc (o *X11Overlay) Hide() { o.window.Hide() }\n",
    "internal/ui/ui.go": "package ui\n\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"goctx/internal/builder\"\n\t\"github.com/gotk3/gotk3/gtk\"\n)\n\nfunc Run() {\n\tgtk.Init(nil)\n\twin, _ := gtk.WindowNew(gtk.WINDOW_TOPLEVEL)\n\twin.SetTitle(\"GoCtx Pro\")\n\twin.SetDefaultSize(1000, 600)\n\twin.Connect(\"destroy\", gtk.MainQuit)\n\n\tpaned, _ := gtk.PanedNew(gtk.ORIENTATION_HORIZONTAL)\n\t\n\t// Sidebar\n\tsidebar, _ := gtk.BoxNew(gtk.ORIENTATION_VERTICAL, 10)\n\tsidebar.SetSizeRequest(250, -1)\n\tlabel, _ := gtk.LabelNew(\"PROJ_CTX\")\n\tbtnRefresh, _ := gtk.ButtonNewWithLabel(\"Regenerate JSON\")\n\tsidebar.PackStart(label, false, false, 10)\n\tsidebar.PackStart(btnRefresh, false, false, 5)\n\n\t// Editor View\n\tvbox, _ := gtk.BoxNew(gtk.ORIENTATION_VERTICAL, 0)\n\tsw, _ := gtk.ScrolledWindowNew(nil, nil)\n\ttv, _ := gtk.TextViewNew()\n\ttv.SetMonospace(true)\n\tbuf, _ := tv.GetBuffer()\n\tsw.Add(tv)\n\tvbox.PackStart(sw, true, true, 0)\n\n\tpaned.Pack1(sidebar, false, false)\n\tpaned.Pack2(vbox, true, false)\n\n\tbtnRefresh.Connect(\"clicked\", func() {\n\t\tout, err := builder.BuildContext(\".\")\n\t\tif err != nil {\n\t\t\tbuf.SetText(fmt.Sprintf(\"Error: %v\", err))\n\t\t\treturn\n\t\t}\n\t\tdata, _ := json.MarshalIndent(out, \"\", \"  \")\n\t\tbuf.SetText(string(data))\n\t})\n\n\twin.Add(paned)\n\twin.ShowAll()\n\tgtk.Main()\n}\n"
  }
}